# fastcampus-featureflag

swagger: https://localhost:8080/swagger-ui.html

Grafana JVM Dashboard ID: 4701

todo
- 시나리오 정의
- 테스트 지표 정의. 실험 정의. 가설 정의
- 시나리오 별 테스트 프로그램 만들기
  - 시나리오 별 실험 검증

성능이 좋다를 정의하기.
- vUser  100, 30초 테스트
- Cache Hit, Latency  


## 시나리오 정의
서버 변인: 키의 갯수와 분포, 캐시 정책(lru, custom)
클라이언트 변인: 키의 조회 패턴(무작위, 한정된, 패턴을 가지는)

- 시나리오 1:
  - 상황: 완전 무작위 키로 featureflag 를 조회한다. 무작위로 많고 충분히 분포된 키.
  - 가설: 
    - Eviction 많이 일어날 것. 정책 별 차이가 없을 것. 일반적으로 LRU 가 더 좋을 것
  - 결과:
    - 한정된 조건에서 일반적으로 LRU 가 더 좋다.
    - 캐시 size 가 늘어날수록 일반적으로 성능이 좋아진다.
    - 그러나 size 가 많아진다고 항상 더 좋아지지는 않는다.
      - size 가 커졌음에도, 더 느려지기 시작. cpu usage 가 높아지면서 역효과 발생.
        

- 시나리오 2:
  - 상황: 특정 키워드로 시작하는 key 의 조회가 압도적으로 많다. (패턴을 가지는 키)
  - 가설 1: Eviction 이 많이 일어날 것. 일반적인 LRU 방식이 좋을 것.
  - 가설 2: LRU 캐시보다, 커스텀 캐시(키 패턴 어드바이저) 가 더 성능이 좋을 것이다.

  - 결론:
    - Eviction 이 많이 일어나면, LRU 가 유리함
    - Eviction 이 충분히 많이 일어나지 않고, 캐시 Hit 가 많이 일어나면, 커스텀 캐시가 유리함
    - 커스텀 캐시가 특정한 케이스에는 확실하게 Hit 비율 측면에서 유리하다. (Eviction 이 적당하다면.)
